<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitnei.cloud.sys.dao.VehNoticeMapper">
    <resultMap id="tailResults" type="com.bitnei.cloud.sys.domain.VehNotice" autoMapping="true">
        <association property="tails" javaType="java.util.HashMap">
        </association>
    </resultMap>

    <!-- 权限sql -->
    <sql id="authSQL">
        and ${authSQL}
    </sql>

    <!-- 通用查询结果列 -->
    <sql id="baseColumns">
        vn.*
    </sql>
    <sql id="moreColumns">
        vn.*
    </sql>

    <!-- 根据id查询 -->
    <select id="findById" resultType="com.bitnei.cloud.sys.domain.VehNotice" parameterType="java.util.HashMap">
        select
        <include refid="moreColumns"/>
        from
        sys_veh_notice vn
        <where>
            vn.id=#{id}
            <if test="authSQL != null">
                <include refid="authSQL"/>
            </if>
        </where>
    </select>

    <!-- 根据车辆公告号查询 -->
    <select id="findByName" resultType="com.bitnei.cloud.sys.domain.VehNotice" parameterType="java.util.HashMap">
        select
        <include refid="moreColumns"/>
        from
        sys_veh_notice vn
        <where>
            vn.name=#{name}
            <if test="authSQL != null">
                <include refid="authSQL"/>
            </if>
        </where>
    </select>

    <!-- 增加 -->
    <insert id="insert" parameterType="java.util.HashMap">
        insert into
        sys_veh_notice (id,name,veh_type_id,notice_year,notice_batch,recommend_year,recommend_batch,publish_date,brand_id,series_id,is_exempt,is_fuel,is_protection,create_time,create_by)
        values
        (#{id},#{name},#{vehTypeId},#{noticeYear},#{noticeBatch},#{recommendYear},#{recommendBatch},#{publishDate},#{brandId},#{seriesId},#{isExempt},#{isFuel},#{isProtection},#{createTime},#{createBy})
    </insert>

    <!-- 更新 -->
    <update id="update" parameterType="java.util.HashMap">
        update sys_veh_notice set
        id=id,name=#{name},veh_type_id=#{vehTypeId},notice_year=#{noticeYear},notice_batch=#{noticeBatch},recommend_year=#{recommendYear},recommend_batch=#{recommendBatch},publish_date=#{publishDate},brand_id=#{brandId},series_id=#{seriesId},is_exempt=#{isExempt},is_fuel=#{isFuel},is_protection=#{isProtection},update_time=#{updateTime},update_by=#{updateBy}
        <where>
            id = #{id}
            <if test="authSQL != null">
                <include refid="authSQL"/>
            </if>
        </where>

    </update>

    <!-- 删除 -->
    <delete id="delete" parameterType="java.util.HashMap">
        delete from
        sys_veh_notice
        <where>
            id = #{id}
            <if test="authSQL != null">
                <include refid="authSQL"/>
            </if>
        </where>
    </delete>

    <!-- 分页查询 -->
    <select id="pagerModel" resultMap="tailResults" parameterType="java.util.HashMap">
        select
        <include refid="moreColumns"/>
        from
        sys_veh_notice vn
        <where>
            <if test="authSQL != null">
                <include refid="authSQL"/>
            </if>
            <!--车辆公告型号-->
            <if test="name!=null and name!=''">
                and vn.name like concat('%',#{name},'%')
            </if>
            <!--车辆种类id-->
            <if test="vehTypeId!=null and vehTypeId!=''">
                and vn.veh_type_id = #{vehTypeId}
            </if>
            <!--公告目录批次年份-->
            <if test="noticeYear!=null and noticeYear!=''">
                and vn.notice_year = #{noticeYear}
            </if>
            <!--推荐目录批次年份-->
            <if test="recommendYear!=null and recommendYear!=''">
                and vn.recommend_year = #{recommendYear}
            </if>
            <!--车辆品牌-->
            <if test="brandId !=null and brandId !=''">
                and vn.brand_id = #{brandId}
            </if>
            <!--品牌系列-->
            <if test="seriesId!=null and seriesId!=''">
                and vn.series_id = #{seriesId}
            </if>
        </where>
        order by vn.create_time desc
    </select>
</mapper>
